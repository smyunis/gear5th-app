{{define "title"}}Account | gear5th{{end}}

{{define "in-console-main"}}

<div class="pb-6">
    <h2 class="text-2xl text-darkest font-bold pb-2">Account</h2>
    <p>Change your password</p>
</div>

{{if .ErrorMessage}}
{{template "error-alert" .ErrorMessage}}
{{end}}

<form id="change-password-form" method="post">
    <div class="mb-4">
        <label for="current-password" class="text-xs">Current password</label>
        <input type="password" name="current-password" id="current-password" maxlength="64" required
            class="p-2 form-input block rounded-sm border-medium focus:border-darkest focus:outline-none focus:ring-0">
    </div>

    <div class="mb-4">
        <label for="password" class="text-xs">New Password</label>
        <input type="password" name="password" id="password" maxlength="64" required
            class="p-2 form-input block rounded-sm border-medium focus:border-darkest focus:outline-none focus:ring-0">
    </div>

    <div class="mb-4">
        <label for="re-password" class="text-xs">Re-enter new password</label>
        <input type="password" name="re-password" id="re-password" maxlength="64" required
            class="p-2 form-input block  rounded-sm border-medium focus:border-darkest focus:outline-none focus:ring-0">
    </div>

    <div class="my-8 flex items-center">
        <button type="submit" class="h-10 mr-4 text-white bg-primary px-4 py-2 rounded-sm hover:opacity-95">
            Change password
        </button>
        <a href="/publish/account">
            <button type="button"
                class="h-10 text-primary border-2 border-primary bg-white px-4 py-2 rounded-sm hover:text-white hover:bg-primary hover:opacity-95">
                Cancel
            </button>
        </a>

    </div>
</form>
<script>

    let changePasswordForm = document.getElementById("change-password-form")

    changePasswordForm.addEventListener("submit", (e) => {
        e.preventDefault();
        let password = document.getElementById("password")
        let repassword = document.getElementById("re-password")

        if (password.value !== repassword.value) {
            alert("Make sure you have entered the same password in the re-enter password field")
        }
        else {
            changePasswordForm.submit()
        }
    });

</script>
{{end}}